# 📋 第三阶段详细说明：页面骨架搭建

## 🎯 第三阶段的目标

**目标**：搭建网站的页面结构，让用户能够看到和浏览内容
- ✅ 创建首页（自我介绍）
- ✅ 创建博客列表页
- ✅ 创建文章详情页
- ✅ 实现路由懒加载（性能优化）
- ✅ 实现 Suspense 流式渲染（面试亮点）

---

## 📁 文件位置总览

```
d:\projects\blog-system\
└── src\
    └── app\
        ├── layout.tsx          # 【修改】根布局（导航栏、页脚）
        ├── page.tsx            # 【新建】首页（自我介绍）
        ├── not-found.tsx       # 【新建】404 错误页面
        └── blog\
            ├── page.tsx        # 【新建】博客列表页
            └── [slug]\
                └── page.tsx    # 【新建】文章详情页（动态路由）
```

---

## 📄 文件详细说明

### 1️⃣ `src/app/layout.tsx` - 根布局文件

**位置**：`src/app/layout.tsx`

**作用**：这是整个网站的"框架"，所有页面都会套在这个框架里

**做了什么**：
1. **添加了导航栏（Navbar）**
   - 固定在页面顶部
   - 包含 Logo 和导航链接（首页、博客）
   - 使用了玻璃态效果（半透明 + 模糊）

2. **添加了页脚（Footer）**
   - 显示版权信息
   - 显示技术栈标签

3. **设置了全局样式**
   - 配置了字体（Geist Sans 和 Geist Mono）
   - 设置了网站标题和描述（SEO）

**为什么这样做**：
- 导航栏让用户可以在任何页面快速跳转
- 页脚提供网站信息，显得更专业
- 统一的布局让所有页面风格一致

**关键代码位置**：
```tsx
// 第 58-116 行：导航栏代码
<nav className="...">
  {/* Logo 和导航链接 */}
</nav>

// 第 123 行：主要内容区域
<main className="min-h-screen">{children}</main>

// 第 129-140 行：页脚代码
<footer className="...">
  {/* 版权信息 */}
</footer>
```

**📐 可视化布局结构**：

```
┌─────────────────────────────────────────────────────────┐
│ <html>                                                   │
│ ┌─────────────────────────────────────────────────────┐ │
│ │ <body>                                               │ │
│ │ ┌─────────────────────────────────────────────────┐ │ │
│ │ │ <nav> sticky top-0 z-50                        │ │ │ ← 定位：sticky（粘性定位）
│ │ │ ┌─────────────────────────────────────────────┐ │ │ │
│ │ │ │ container mx-auto                            │ │ │ │ ← 布局：居中容器
│ │ │ │ ┌─────────────────────────────────────────┐ │ │ │ │
│ │ │ │ │ flex items-center h-16                   │ │ │ │ │ ← 布局：Flexbox（水平排列）
│ │ │ │ │ ┌──────────┐  ┌──────────┐  ┌────────┐ │ │ │ │ │
│ │ │ │ │ │ Logo     │  │ 首页 博客 │  │ 登录   │ │ │ │ │ │
│ │ │ │ │ └──────────┘  └──────────┘  └────────┘ │ │ │ │ │
│ │ │ │ └─────────────────────────────────────────┘ │ │ │ │
│ │ │ └─────────────────────────────────────────────┘ │ │ │
│ │ └─────────────────────────────────────────────────┘ │ │
│ │                                                       │ │
│ │ ┌─────────────────────────────────────────────────┐ │ │
│ │ │ <main> min-h-screen                              │ │ │ ← 布局：块级（默认）
│ │ │   {children}  ← 这里会插入具体页面的内容         │ │ │
│ │ └─────────────────────────────────────────────────┘ │ │
│ │                                                       │ │
│ │ ┌─────────────────────────────────────────────────┐ │ │
│ │ │ <footer>                                         │ │ │ ← 布局：块级（默认）
│ │ │ ┌─────────────────────────────────────────────┐ │ │ │
│ │ │ │ container mx-auto text-center              │ │ │ │ ← 布局：居中容器
│ │ │ │  版权信息                                    │ │ │ │
│ │ │ │  技术栈标签（flex flex-wrap justify-center）│ │ │ │ ← 布局：Flexbox（允许换行）
│ │ │ └─────────────────────────────────────────────┘ │ │ │
│ │ └─────────────────────────────────────────────────┘ │ │
│ └─────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

**🎨 布局方式说明**：
- **导航栏**：使用 **Flexbox（弹性布局）** - `flex items-center` 实现水平排列和垂直居中
- **导航栏定位**：使用 **定位（Positioning）** - `sticky top-0` 实现滚动时固定在顶部
- **容器居中**：使用 **定位（Positioning）** - `container mx-auto` 实现水平居中
- **页脚标签**：使用 **Flexbox（弹性布局）** - `flex flex-wrap justify-center` 实现标签居中排列并允许换行

---

### 2️⃣ `src/app/page.tsx` - 首页（自我介绍）

**位置**：`src/app/page.tsx`

**作用**：用户访问网站时看到的第一个页面，展示你的个人信息

**做了什么**：
1. **创建了炫酷的背景**
   - 渐变背景（从主色到紫色到粉色）
   - 多个光晕效果（装饰性圆形）
   - 模糊效果（让背景更柔和）

2. **创建了头像区域**
   - 圆形头像占位符
   - 悬停时有放大动画
   - 外圈光晕效果

3. **创建了技能栈展示**
   - 用标签（Tag）展示技术栈
   - 每个标签有悬停动画
   - 玻璃态效果（半透明背景）

4. **创建了关于博客的介绍卡片**
   - 大卡片设计
   - 玻璃态效果
   - 悬停时有阴影变化

5. **创建了行动按钮（CTA）**
   - "查看博客"按钮
   - 悬停时有光效动画
   - 点击时有缩放反馈

**为什么这样做**：
- 炫酷的设计能吸引用户注意
- 展示技能栈让访客快速了解你的技术能力
- 行动按钮引导用户进入博客

**关键代码位置**：
```tsx
// 第 10-12 行：外层容器（包含背景）
<div className="relative min-h-screen overflow-hidden">
  {/* 背景渐变和光晕 */}
</div>

// 第 20-40 行：头像和基本信息
<div className="flex flex-col items-center gap-8">
  {/* 头像和标题 */}
</div>

// 第 138-190 行：技能栈区域
<section className="space-y-6">
  {/* 技能标签 */}
</section>

// 第 193-220 行：关于博客卡片
<section className="space-y-6">
  {/* 介绍卡片 */}
</section>
```

**📐 可视化布局结构**：

```
┌─────────────────────────────────────────────────────────┐
│ <div> relative min-h-screen                             │ ← 定位：relative（相对定位）
│ ┌─────────────────────────────────────────────────────┐ │
│ │ <div> absolute inset-0 (背景渐变)                   │ │ ← 定位：absolute（绝对定位）
│ └─────────────────────────────────────────────────────┘ │
│ ┌─────────────────────────────────────────────────────┐ │
│ │ <div> absolute (装饰光晕1)                         │ │ ← 定位：absolute（绝对定位）
│ └─────────────────────────────────────────────────────┘ │
│ ┌─────────────────────────────────────────────────────┐ │
│ │ <div> absolute (装饰光晕2)                         │ │ ← 定位：absolute（绝对定位）
│ └─────────────────────────────────────────────────────┘ │
│                                                           │
│ ┌─────────────────────────────────────────────────────┐ │
│ │ <div> relative z-10 container mx-auto              │ │ ← 定位：relative + 居中容器
│ │ ┌─────────────────────────────────────────────────┐ │ │
│ │ │ <div> max-w-4xl mx-auto space-y-12             │ │ │ ← 布局：限制宽度 + 垂直间距
│ │ │ ┌─────────────────────────────────────────────┐ │ │ │
│ │ │ │ <div> flex flex-col items-center            │ │ │ │ ← 布局：Flexbox（垂直排列）
│ │ │ │   ┌───────────────────────────────────────┐ │ │ │ │
│ │ │ │   │ <div> relative group (头像容器)       │ │ │ │ │ ← 定位：relative
│ │ │ │   │   <div> absolute (光晕)               │ │ │ │ │ ← 定位：absolute
│ │ │ │   │   <div> relative z-10 (头像)          │ │ │ │ │ ← 定位：relative
│ │ │ │   └───────────────────────────────────────┘ │ │ │ │
│ │ │ │   <h1> 标题                                  │ │ │ │
│ │ │ │   <p> 副标题                                 │ │ │ │
│ │ │ │ └─────────────────────────────────────────────┘ │ │ │
│ │ │ │                                                   │ │ │
│ │ │ │ ┌─────────────────────────────────────────────┐ │ │ │
│ │ │ │ │ <section> space-y-6                        │ │ │ │ ← 布局：块级 + 垂直间距
│ │ │ │ │   <h2> 技术栈                                │ │ │ │
│ │ │ │ │   <div> flex flex-wrap justify-center       │ │ │ │ ← 布局：Flexbox（允许换行）
│ │ │ │ │     [标签1] [标签2] [标签3] ...             │ │ │ │
│ │ │ │ │   </div>                                     │ │ │ │
│ │ │ │ └─────────────────────────────────────────────┘ │ │ │
│ │ │ │                                                   │ │ │
│ │ │ │ ┌─────────────────────────────────────────────┐ │ │ │
│ │ │ │ │ <section> space-y-6                        │ │ │ │ ← 布局：块级 + 垂直间距
│ │ │ │ │   <div> 关于博客卡片                         │ │ │ │
│ │ │ │ └─────────────────────────────────────────────┘ │ │ │
│ │ │ │                                                   │ │ │
│ │ │ │ ┌─────────────────────────────────────────────┐ │ │ │
│ │ │ │ │ <div> flex justify-center                  │ │ │ │ ← 布局：Flexbox（水平居中）
│ │ │ │ │   <Link> 查看博客按钮                        │ │ │ │
│ │ │ │ └─────────────────────────────────────────────┘ │ │ │
│ │ │ └─────────────────────────────────────────────────┘ │ │
│ │ └─────────────────────────────────────────────────────┘ │
│ └─────────────────────────────────────────────────────────┘
```

**🎨 布局方式说明**：
- **外层容器**：使用 **定位（Positioning）** - `relative` 为内部绝对定位元素提供定位基准
- **背景装饰**：使用 **定位（Positioning）** - `absolute` 实现背景渐变和光晕效果
- **内容区域**：使用 **定位（Positioning）** - `container mx-auto` 实现水平居中
- **头像区域**：使用 **Flexbox（弹性布局）** - `flex flex-col items-center` 实现垂直排列和居中
- **技能标签**：使用 **Flexbox（弹性布局）** - `flex flex-wrap justify-center` 实现标签居中排列并允许换行
- **按钮区域**：使用 **Flexbox（弹性布局）** - `flex justify-center` 实现按钮水平居中

---

### 3️⃣ `src/app/blog/page.tsx` - 博客列表页

**位置**：`src/app/blog/page.tsx`

**作用**：显示所有已发布的博客文章列表

**做了什么**：
1. **创建了骨架屏组件（BlogListSkeleton）**
   - 在数据加载时显示"假的"文章卡片
   - 有脉冲动画（呼吸效果）
   - 让用户感觉加载更快

2. **创建了博客列表组件（BlogList）**
   - 从数据库获取文章数据（使用 Prisma）
   - 只显示已发布的文章（`published: true`）
   - 按创建时间倒序排列（最新的在前）
   - 每篇文章显示：标题、摘要、日期、浏览量

3. **实现了 Suspense 流式渲染**
   - 用 `<Suspense>` 包裹异步组件
   - 加载时显示骨架屏
   - 加载完成后显示真实内容

4. **实现了路由懒加载**
   - 使用 `dynamic()` 导入组件
   - 只有访问这个页面时才加载
   - 减少首屏 JavaScript 体积

**为什么这样做**：
- 骨架屏提升用户体验（不会看到空白页面）
- Suspense 是 Next.js 15 的核心特性（面试亮点）
- 懒加载优化性能（首屏加载更快）

**关键代码位置**：
```tsx
// 第 14-26 行：骨架屏组件
function BlogListSkeleton() {
  return (
    <div className="space-y-4">
      {/* 假的文章卡片 */}
    </div>
  )
}

// 第 28-74 行：博客列表组件（从数据库获取数据）
async function BlogList() {
  const posts = await prisma.post.findMany({
    where: { published: true },
    // ...
  })
  // 渲染文章列表
}

// 第 76-94 行：主页面组件（使用 Suspense）
export default function BlogPage() {
  return (
    <Suspense fallback={<BlogListSkeleton />}>
      <BlogList />
    </Suspense>
  )
}
```

**数据库查询说明**：
```tsx
// 第 31-43 行：从数据库获取文章
const posts = await prisma.post.findMany({
  where: { published: true },        // 条件：只获取已发布的
  orderBy: { createdAt: 'desc' },   // 排序：按创建时间倒序
  select: {                          // 选择：只获取需要的字段
    id: true,
    title: true,
    slug: true,
    // ...
  },
  take: 10,                          // 限制：只取前 10 篇
})
```

**📐 可视化布局结构**：

```
┌─────────────────────────────────────────────────────────┐
│ <div> relative min-h-screen                             │ ← 定位：relative（相对定位）
│ ┌─────────────────────────────────────────────────────┐ │
│ │ <div> absolute (背景光晕1)                          │ │ ← 定位：absolute（绝对定位）
│ └─────────────────────────────────────────────────────┘ │
│ ┌─────────────────────────────────────────────────────┐ │
│ │ <div> absolute (背景光晕2)                          │ │ ← 定位：absolute（绝对定位）
│ └─────────────────────────────────────────────────────┘ │
│                                                           │
│ ┌─────────────────────────────────────────────────────┐ │
│ │ <div> relative z-10 container mx-auto              │ │ ← 定位：relative + 居中容器
│ │ ┌─────────────────────────────────────────────────┐ │ │
│ │ │ <div> max-w-5xl mx-auto                       │ │ │ ← 布局：限制宽度 + 居中
│ │ │ ┌─────────────────────────────────────────────┐ │ │ │
│ │ │ │ <div> mb-12 text-center                    │ │ │ │ ← 布局：块级 + 文本居中
│ │ │ │   <h1> 博客文章                              │ │ │ │
│ │ │ │   <p> 探索技术，分享思考                      │ │ │ │
│ │ │ └─────────────────────────────────────────────┘ │ │ │
│ │ │                                                   │ │ │
│ │ │ ┌─────────────────────────────────────────────┐ │ │ │
│ │ │ │ <Suspense>                                  │ │ │ │
│ │ │ │   <BlogList>                                │ │ │ │
│ │ │ │   ┌─────────────────────────────────────┐ │ │ │ │
│ │ │ │   │ <div> space-y-6                      │ │ │ │ │ ← 布局：块级 + 垂直间距
│ │ │ │   │ ┌─────────────────────────────────┐ │ │ │ │ │
│ │ │ │   │ │ <Link> block p-6                 │ │ │ │ │ │ ← 布局：块级（文章卡片1）
│ │ │ │   │ │   <h2> 文章标题                    │ │ │ │ │ │
│ │ │ │   │ │   <p> 文章摘要                     │ │ │ │ │ │
│ │ │ │   │ │   <div> flex items-center gap-4  │ │ │ │ │ │ ← 布局：Flexbox（元信息）
│ │ │ │   │ │     [日期] · [浏览量]              │ │ │ │ │ │
│ │ │ │   │ └─────────────────────────────────┘ │ │ │ │ │
│ │ │ │   │ ┌─────────────────────────────────┐ │ │ │ │ │
│ │ │ │   │ │ <Link> block p-6                 │ │ │ │ │ │ ← 布局：块级（文章卡片2）
│ │ │ │   │ │   ...                             │ │ │ │ │ │
│ │ │ │   │ └─────────────────────────────────┘ │ │ │ │ │
│ │ │ │   │ ... (更多文章卡片)                    │ │ │ │ │
│ │ │ │   └─────────────────────────────────────┘ │ │ │ │
│ │ │ │   </BlogList>                              │ │ │ │
│ │ │ │ </Suspense>                                │ │ │ │
│ │ │ └─────────────────────────────────────────────┘ │ │ │
│ │ └─────────────────────────────────────────────────┘ │ │
│ └─────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

**🎨 布局方式说明**：
- **外层容器**：使用 **定位（Positioning）** - `relative` 为背景装饰提供定位基准
- **背景装饰**：使用 **定位（Positioning）** - `absolute` 实现光晕效果
- **内容区域**：使用 **定位（Positioning）** - `container mx-auto` 实现水平居中
- **标题区域**：使用 **块级布局（默认）** - `text-center` 实现文本居中
- **文章列表**：使用 **块级布局（默认）** - `space-y-6` 实现垂直间距
- **文章卡片**：使用 **块级布局（默认）** - `block` 实现卡片占满整行
- **元信息区域**：使用 **Flexbox（弹性布局）** - `flex items-center gap-4` 实现水平排列和垂直居中

---

### 4️⃣ `src/app/blog/[slug]/page.tsx` - 文章详情页

**位置**：`src/app/blog/[slug]/page.tsx`

**作用**：显示单篇博客文章的详细内容

**做了什么**：
1. **创建了动态路由**
   - `[slug]` 是动态参数
   - 比如访问 `/blog/my-first-post`，`slug` 就是 `"my-first-post"`
   - 根据 `slug` 从数据库查找对应的文章

2. **创建了文章内容组件（PostContent）**
   - 从数据库获取文章数据
   - 如果文章不存在或未发布，显示 404
   - 显示文章标题、作者、日期、浏览量
   - 显示文章内容（HTML 格式）

3. **实现了浏览量统计**
   - 每次访问文章时，浏览量 +1
   - 使用异步更新（不阻塞页面渲染）

4. **使用了 Suspense**
   - 加载时显示骨架屏
   - 提升用户体验

**为什么这样做**：
- 动态路由让每篇文章都有唯一的 URL
- 浏览量统计让文章更"活"
- Suspense 让加载过程更流畅

**关键代码位置**：
```tsx
// 第 18-60 行：文章内容组件
async function PostContent({ slug }: { slug: string }) {
  // 从数据库获取文章
  const post = await prisma.post.findUnique({
    where: { slug },  // 根据 slug 查找
  })
  
  // 增加浏览量（异步，不阻塞）
  prisma.post.update({
    where: { id: post.id },
    data: { viewCount: { increment: 1 } },
  })
  
  // 渲染文章内容
}

// 第 62-90 行：主页面组件
export default async function PostPage({ params }) {
  const { slug } = await params  // 获取动态参数
  return (
    <Suspense fallback={<PostSkeleton />}>
      <PostContent slug={slug} />
    </Suspense>
  )
}
```

**动态路由说明**：
- `[slug]` 是 Next.js 的动态路由语法
- 访问 `/blog/my-first-post` 时，`params.slug` 就是 `"my-first-post"`
- 可以用这个值去数据库查找对应的文章

**📐 可视化布局结构**：

```
┌─────────────────────────────────────────────────────────┐
│ <div> container mx-auto px-4 py-16                     │ ← 布局：居中容器
│ ┌─────────────────────────────────────────────────────┐ │
│ │ <div> max-w-4xl mx-auto                             │ │ ← 布局：限制宽度 + 居中
│ │ ┌─────────────────────────────────────────────────┐ │ │
│ │ │ <Suspense>                                       │ │ │
│ │ │   <PostContent>                                  │ │ │
│ │ │   ┌───────────────────────────────────────────┐ │ │ │
│ │ │   │ <article> prose mx-auto                  │ │ │ │ │ ← 布局：块级（文章容器）
│ │ │   │ ┌─────────────────────────────────────┐ │ │ │ │ │
│ │ │   │ │ <header> mb-8                        │ │ │ │ │ │ ← 布局：块级（文章头部）
│ │ │   │ │   <h1> 文章标题                        │ │ │ │ │ │
│ │ │   │ │   <div> flex items-center gap-4      │ │ │ │ │ │ ← 布局：Flexbox（元信息）
│ │ │   │ │     [作者] · [日期] · [浏览量]          │ │ │ │ │ │
│ │ │   │ └─────────────────────────────────────┘ │ │ │ │ │
│ │ │   │                                           │ │ │ │ │
│ │ │   │ <div> 文章内容（HTML）                     │ │ │ │ │ ← 布局：块级（文章正文）
│ │ │   │   ...                                     │ │ │ │ │
│ │ │   └───────────────────────────────────────────┘ │ │ │ │
│ │ │   </PostContent>                                │ │ │ │
│ │ │ </Suspense>                                     │ │ │ │
│ │ └─────────────────────────────────────────────────┘ │ │
│ └─────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

**🎨 布局方式说明**：
- **外层容器**：使用 **定位（Positioning）** - `container mx-auto` 实现水平居中
- **内容区域**：使用 **定位（Positioning）** - `max-w-4xl mx-auto` 实现限制宽度并居中
- **文章头部**：使用 **块级布局（默认）** - 标题和元信息垂直排列
- **元信息区域**：使用 **Flexbox（弹性布局）** - `flex items-center gap-4` 实现水平排列和垂直居中
- **文章正文**：使用 **块级布局（默认）** - 内容自然垂直排列

---

### 5️⃣ `src/app/not-found.tsx` - 404 错误页面

**位置**：`src/app/not-found.tsx`

**作用**：当用户访问不存在的页面时显示

**做了什么**：
1. **创建了友好的错误页面**
   - 显示 "404" 和 "页面未找到"
   - 提供返回首页的按钮

**为什么这样做**：
- 用户访问错误链接时，不会看到浏览器默认的错误页面
- 提供返回首页的按钮，提升用户体验

---

### 6️⃣ `src/lib/prisma.ts` - Prisma 客户端

**位置**：`src/lib/prisma.ts`

**作用**：创建 Prisma 客户端的单例（避免重复创建）

**做了什么**：
1. **创建了 Prisma 客户端实例**
   - 在开发环境中，每次热重载都会创建新实例
   - 使用全局变量缓存实例，避免"连接过多"错误

**为什么这样做**：
- Prisma 客户端应该只创建一次
- 在开发环境中，Next.js 会热重载，导致重复创建
- 使用全局变量缓存可以解决这个问题

**关键代码**：
```tsx
// 全局变量缓存
const globalForPrisma = globalThis as unknown as {
  prisma: PrismaClient | undefined
}

// 创建或使用缓存的实例
export const prisma =
  globalForPrisma.prisma ??
  new PrismaClient({
    log: process.env.NODE_ENV === 'development' ? ['query', 'error', 'warn'] : ['error'],
  })

// 在非生产环境中缓存实例
if (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma
```

---

## 🔄 数据流程说明

### 博客列表页的数据流程

```
用户访问 /blog
    ↓
Next.js 渲染 BlogPage 组件
    ↓
遇到 <Suspense>，先显示骨架屏
    ↓
同时，BlogList 组件在服务器端运行
    ↓
调用 prisma.post.findMany() 查询数据库
    ↓
数据库返回文章列表
    ↓
BlogList 组件渲染文章列表
    ↓
替换骨架屏，显示真实内容
```

### 文章详情页的数据流程

```
用户访问 /blog/my-first-post
    ↓
Next.js 解析动态路由，获取 slug = "my-first-post"
    ↓
渲染 PostPage 组件
    ↓
遇到 <Suspense>，先显示骨架屏
    ↓
同时，PostContent 组件在服务器端运行
    ↓
调用 prisma.post.findUnique({ where: { slug } }) 查询数据库
    ↓
数据库返回文章数据
    ↓
异步更新浏览量（不阻塞渲染）
    ↓
PostContent 组件渲染文章内容
    ↓
替换骨架屏，显示真实内容
```

---

## 📐 项目布局系统总结

### 整体布局架构

```
┌─────────────────────────────────────────────────────────┐
│ <html>                                                    │
│ └── <body>                                                │
│     ├── <nav> sticky (导航栏)                            │ ← 定位：sticky
│     │   └── <div> flex (Flexbox 水平布局)                │ ← 布局：Flexbox
│     │                                                      │
│     ├── <main> (主要内容区)                               │ ← 布局：块级
│     │   └── {children} ← 具体页面内容                    │
│     │       ├── 首页：relative + absolute (背景装饰)      │ ← 定位：relative/absolute
│     │       ├── 博客列表：relative + absolute (背景装饰)  │ ← 定位：relative/absolute
│     │       └── 文章详情：container (居中容器)            │ ← 布局：居中容器
│     │                                                      │
│     └── <footer> (页脚)                                  │ ← 布局：块级
│         └── <div> flex flex-wrap (技术栈标签)            │ ← 布局：Flexbox
└─────────────────────────────────────────────────────────┘
```

### 布局方式使用统计

| 布局方式 | 使用场景 | 对应 CSS |
|---------|---------|---------|
| **Flexbox（弹性布局）** | 导航栏、技能标签、元信息、按钮 | `display: flex` |
| **定位（Positioning）** | 背景装饰、粘性导航、居中容器 | `position: relative/absolute/sticky` |
| **块级布局（默认）** | 文章卡片、标题、段落 | `display: block` |
| **居中容器** | 所有页面的内容区域 | `container mx-auto` |

### 核心布局模式

1. **三层嵌套容器模式**（最常用）
   ```
   外层：relative min-h-screen (全屏容器)
   ↓
   中层：container mx-auto (居中容器)
   ↓
   内层：max-w-4xl/5xl mx-auto (限制宽度)
   ```

2. **Flexbox 水平布局**
   ```
   flex items-center justify-between
   → 水平排列，垂直居中，两端对齐
   ```

3. **Flexbox 垂直布局**
   ```
   flex flex-col items-center gap-8
   → 垂直排列，水平居中，固定间距
   ```

4. **响应式布局**
   ```
   hidden md:flex
   → 移动端隐藏，桌面端显示
   ```

---

## 🎨 设计亮点总结

### 1. 玻璃态效果（Glassmorphism）
- **位置**：首页技能标签、博客卡片
- **实现**：`bg-background/80 backdrop-blur-sm`
- **效果**：半透明背景 + 模糊 = 毛玻璃效果

### 2. 渐变背景
- **位置**：首页背景
- **实现**：`bg-gradient-to-br from-primary via-purple-500 to-pink-500`
- **效果**：从主色到紫色到粉色的渐变

### 3. 悬停动画
- **位置**：所有可交互元素
- **实现**：`hover:scale-105 transition-all duration-300`
- **效果**：鼠标悬停时放大、阴影变化

### 4. 骨架屏加载
- **位置**：博客列表页、文章详情页
- **实现**：`<Suspense fallback={<Skeleton />}>`
- **效果**：加载时显示"假的"内容，不会白屏

### 5. 路由懒加载
- **位置**：博客列表页的 LazyExample 组件
- **实现**：`dynamic(() => import('@/components/lazy-example'))`
- **效果**：只有访问时才加载，减少首屏体积

---

## 📚 技术概念解释

### Server Component（服务端组件）
- **是什么**：在服务器端运行的 React 组件
- **好处**：可以直接访问数据库，不需要写 API 接口
- **例子**：`BlogList` 和 `PostContent` 都是 Server Component

### Suspense（悬念组件）
- **是什么**：React 的异步组件包装器
- **作用**：在数据加载时显示占位内容
- **好处**：用户体验更好，不会看到空白页面

### 动态路由（Dynamic Route）
- **是什么**：URL 中的参数可以动态变化
- **语法**：`[slug]` 表示动态参数
- **例子**：`/blog/[slug]` 可以匹配 `/blog/my-first-post`、`/blog/hello-world` 等

### Prisma 查询
- **findMany**：查找多条记录（返回数组）
- **findUnique**：查找唯一记录（根据唯一字段，如 slug）
- **where**：查询条件
- **orderBy**：排序方式
- **select**：选择需要的字段（减少数据传输）

---

## 🎯 第三阶段完成清单

- [x] 创建根布局（导航栏、页脚）
- [x] 创建首页（自我介绍、技能栈、关于博客）
- [x] 创建博客列表页（从数据库获取文章）
- [x] 创建文章详情页（动态路由、浏览量统计）
- [x] 创建 404 页面
- [x] 实现 Suspense 流式渲染
- [x] 实现路由懒加载
- [x] 创建 Prisma 客户端单例

---

## 🚀 下一步

第三阶段完成后，你应该能够：
1. 看到炫酷的首页
2. 看到博客列表页（虽然还没有文章）
3. 理解每个文件的作用

**第四阶段**：身份验证（登录功能）
- 让系统能区分"你（博主）"和"游客"
- 只有你能发布和编辑文章

---

## 💡 学习建议

1. **先理解文件结构**：知道每个文件在哪里，做什么
2. **再看代码细节**：理解每个组件的作用
3. **尝试修改**：改改颜色、文字，看看效果
4. **理解数据流**：知道数据从哪里来，到哪里去

**记住**：不要害怕看不懂，多读几遍，多实践，慢慢就懂了！💪
